--- 
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
const hasUpdates = siteConfig.NewsItem && siteConfig.NewsItem.length > 0;
---

<header
  id="header"
  class="fixed top-0 left-0 right-0 z-50 hidden md:block transition-all duration-300"
>
  <nav class="max-w-7xl mx-auto px-8 py-4">
    <ul class="flex items-center gap-8 justify-center">
      <li>
        <a href="/" class="text-gray-700 hover:text-blue transition-colors font-medium">Home</a>
      </li>

      <li>
        <a href="/#about" class="text-gray-700 hover:text-blue transition-colors font-medium">About</a>
      </li>

      { hasProjects && (
        <li>
          <a href="/projects" class="text-gray-700 hover:text-blue transition-colors font-medium">Projects</a>
        </li>
      ) }

      { hasUpdates && (
        <li>
          <a href="/#news" class="text-gray-700 hover:text-blue transition-colors font-medium">Education</a>
        </li>
      ) }

      { hasEducation && (
        <li>
          <a href="/#education" class="text-gray-700 hover:text-blue transition-colors font-medium">Education</a>
        </li>
      ) }

      <li>
        <a
          href="https://drive.google.com/drive/folders/1w7-eAqVPWLUALg1ZREcdAiqZe89ZNQvC?usp=sharing"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-700 hover:text-blue transition-colors font-medium"
        >
          Study Resources
        </a>
      </li>
    </ul>
  </nav>
<button id="theme-toggle" aria-label="Toggle theme" class="ml-4 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"><svg id="theme-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></button>

<script>
  (function() {
    const toggle = document.getElementById('theme-toggle');
    const icon = document.getElementById('theme-icon');
    const setIcon = (isDark) => {
      // If you want, change icon appearance here
      icon.style.opacity = isDark ? '0.9' : '0.7';
    }
    const applyTheme = (theme) => {
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
        setIcon(true);
      } else {
        document.documentElement.classList.remove('dark');
        setIcon(false);
      }
    }
    const saved = localStorage.getItem('theme');
    if (saved) {
      applyTheme(saved);
    } else {
      // respect system preference
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      applyTheme(prefersDark ? 'dark' : 'light');
    }
    toggle?.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      setIcon(isDark);
    });
  })();
</script>

</header>

<script>
  window.addEventListener("scroll", () => {
    const header = document.getElementById("header");
    if (window.scrollY > 100) {
      header?.classList.add("bg-white/80", "backdrop-blur-sm");
    } else {
      header?.classList.remove("bg-white/80", "backdrop-blur-sm");
    }
  });
</script>

<style>
  html { scroll-behavior: smooth; }
</style>

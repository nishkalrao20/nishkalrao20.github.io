---
import { siteConfig } from '../../config';

export async function getStaticPaths() {
  const files = await Astro.glob('../../contents/*.md');

  return Object.entries(files).map(([path, mod]) => {
    const slug = path.split('/').pop().replace('.md', '');
    return { params: { slug } };
  });
}

const files = await Astro.glob('../../contents/*.md');
const all = Object.fromEntries(
  Object.entries(files).map(([path, mod]) => {
    const slug = path.split('/').pop().replace('.md', '');
    return [slug, mod];
  })
);

const { slug } = Astro.params;
const project = all[slug];

---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{project.frontmatter?.title ?? slug} â€” {Astro.site?.title}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body>
    <main class="prose lg:prose-xl p-6">
      <h1>{project.frontmatter?.title}</h1>
      <article>
        <Component src={project} />
      </article>
    </main>
  </body>
</html>
